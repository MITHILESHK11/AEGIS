{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect } from \"react\";\r\n\r\ninterface ProtectedRouteProps {\r\n    children: React.ReactNode;\r\n    allowedRoles?: string[];\r\n}\r\n\r\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children, allowedRoles }) => {\r\n    const { user, loading, role } = useAuth();\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        if (!loading && !user) {\r\n            router.push(\"/login\");\r\n        } else if (!loading && user && allowedRoles && !allowedRoles.includes(role || 'student')) {\r\n            // Redirect to unauthorized page if role doesn't match\r\n            router.push(\"/unauthorized\");\r\n        }\r\n    }, [user, loading, role, allowedRoles, router]);\r\n\r\n    if (loading) {\r\n        return <div className=\"flex items-center justify-center min-h-screen\">Loading authentication...</div>;\r\n    }\r\n\r\n    // If check fails, returing null prevents flash of content before redirect executes\r\n    if (!user || (allowedRoles && !allowedRoles.includes(role || 'student'))) {\r\n        return null;\r\n    }\r\n\r\n    return <>{children}</>;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAUA,MAAM,iBAAgD,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE;IAC7E,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,yIAAO;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACN,IAAI,CAAC,WAAW,CAAC,MAAM;YACnB,OAAO,IAAI,CAAC;QAChB,OAAO,IAAI,CAAC,WAAW,QAAQ,gBAAgB,CAAC,aAAa,QAAQ,CAAC,QAAQ,YAAY;YACtF,sDAAsD;YACtD,OAAO,IAAI,CAAC;QAChB;IACJ,GAAG;QAAC;QAAM;QAAS;QAAM;QAAc;KAAO;IAE9C,IAAI,SAAS;QACT,qBAAO,8OAAC;YAAI,WAAU;sBAAgD;;;;;;IAC1E;IAEA,mFAAmF;IACnF,IAAI,CAAC,QAAS,gBAAgB,CAAC,aAAa,QAAQ,CAAC,QAAQ,YAAa;QACtE,OAAO;IACX;IAEA,qBAAO;kBAAG;;AACd;uCAEe"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/app/faculty/opportunities/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport ProtectedRoute from '@/components/ProtectedRoute';\r\n\r\nexport default function PostOpportunityPage() {\r\n    const { user, role } = useAuth();\r\n    const router = useRouter();\r\n    const [loading, setLoading] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        description: '',\r\n        requiredSkills: '',\r\n        duration: '',\r\n        stipend: '',\r\n        applicationDeadline: ''\r\n    });\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            const token = await user?.getIdToken();\r\n            const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api'}/opportunities/post`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    ...formData,\r\n                    requiredSkills: formData.requiredSkills.split(',').map(s => s.trim())\r\n                })\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to post opportunity');\r\n\r\n            alert('Opportunity posted successfully!');\r\n            router.push('/dashboard');\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert('Error posting opportunity.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ProtectedRoute allowedRoles={['faculty', 'admin']}>\r\n            <div className=\"max-w-2xl mx-auto py-10\">\r\n                <h1 className=\"text-3xl font-bold mb-6 text-gray-900 dark:text-white\">Post New Opportunity</h1>\r\n                <form onSubmit={handleSubmit} className=\"space-y-6 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-md border border-gray-200 dark:border-gray-700\">\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Title</label>\r\n                        <input type=\"text\" name=\"title\" required value={formData.title} onChange={handleChange} className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2\" placeholder=\"e.g. Research Assistant - AI Lab\" />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Description</label>\r\n                        <textarea name=\"description\" required rows={4} value={formData.description} onChange={handleChange} className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2\"></textarea>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Required Skills (comma separated)</label>\r\n                        <input type=\"text\" name=\"requiredSkills\" required value={formData.requiredSkills} onChange={handleChange} className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2\" placeholder=\"e.g. Python, PyTorch, React\" />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Duration</label>\r\n                            <input type=\"text\" name=\"duration\" required value={formData.duration} onChange={handleChange} className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2\" placeholder=\"e.g. 3 months\" />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Stipend</label>\r\n                            <input type=\"text\" name=\"stipend\" required value={formData.stipend} onChange={handleChange} className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2\" placeholder=\"e.g. $500/month or Unpaid\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Application Deadline</label>\r\n                        <input type=\"date\" name=\"applicationDeadline\" required value={formData.applicationDeadline} onChange={handleChange} className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2\" />\r\n                    </div>\r\n\r\n                    <button type=\"submit\" disabled={loading} className=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\">\r\n                        {loading ? 'Posting...' : 'Post Opportunity'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </ProtectedRoute>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}