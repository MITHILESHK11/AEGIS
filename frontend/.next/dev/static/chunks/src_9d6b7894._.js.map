{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport const storage = getStorage(app);\r\n"],"names":[],"mappings":";;;;;;;;AAMY;AANZ;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACnB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACT;AAEA,MAAM,MAAM,IAAA,oLAAa,EAAC;AACnB,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8KAAU,EAAC"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged, User, IdTokenResult } from \"firebase/auth\";\r\nimport { auth } from \"@/lib/firebase\";\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    loading: boolean;\r\n    role: string | null;\r\n    refreshRole: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n    user: null,\r\n    loading: true,\r\n    role: null,\r\n    refreshRole: async () => { }\r\n});\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [role, setRole] = useState<string | null>(null);\r\n\r\n    const refreshRole = async () => {\r\n        if (!auth.currentUser) {\r\n            setRole(null);\r\n            return;\r\n        }\r\n        try {\r\n            setLoading(true);\r\n            const idTokenResult: IdTokenResult = await auth.currentUser.getIdTokenResult(true);\r\n            const newRole = (idTokenResult.claims.role as string) || 'student';\r\n            setRole(newRole);\r\n        } catch (error) {\r\n            console.error(\"[AuthContext] Error refreshing role\", error);\r\n            setRole('student');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n            setLoading(true);\r\n            setRole(null); // Clear role immediately to prevent stale UI\r\n\r\n            if (currentUser) {\r\n                setUser(currentUser);\r\n                try {\r\n                    const idTokenResult: IdTokenResult = await currentUser.getIdTokenResult(true);\r\n                    const newRole = (idTokenResult.claims.role as string) || 'student';\r\n                    setRole(newRole);\r\n                } catch (error) {\r\n                    console.error(\"[AuthContext] Error getting token result\", error);\r\n                    setRole('student');\r\n                }\r\n            } else {\r\n                setUser(null);\r\n                // Role already cleared above\r\n            }\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, loading, role, refreshRole }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAAA;AACA;;;AAHA;;;;AAYA,MAAM,4BAAc,IAAA,8KAAa,EAAkB;IAC/C,MAAM;IACN,SAAS;IACT,MAAM;IACN,aAAa,WAAc;AAC/B;AAEO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;;IACpE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAgB;IAEhD,MAAM,cAAc;QAChB,IAAI,CAAC,iIAAI,CAAC,WAAW,EAAE;YACnB,QAAQ;YACR;QACJ;QACA,IAAI;YACA,WAAW;YACX,MAAM,gBAA+B,MAAM,iIAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC;YAC7E,MAAM,UAAU,AAAC,cAAc,MAAM,CAAC,IAAI,IAAe;YACzD,QAAQ;QACZ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,uCAAuC;YACrD,QAAQ;QACZ,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,0KAAS;kCAAC;YACN,MAAM,cAAc,IAAA,mLAAkB,EAAC,iIAAI;sDAAE,OAAO;oBAChD,WAAW;oBACX,QAAQ,OAAO,6CAA6C;oBAE5D,IAAI,aAAa;wBACb,QAAQ;wBACR,IAAI;4BACA,MAAM,gBAA+B,MAAM,YAAY,gBAAgB,CAAC;4BACxE,MAAM,UAAU,AAAC,cAAc,MAAM,CAAC,IAAI,IAAe;4BACzD,QAAQ;wBACZ,EAAE,OAAO,OAAO;4BACZ,QAAQ,KAAK,CAAC,4CAA4C;4BAC1D,QAAQ;wBACZ;oBACJ,OAAO;wBACH,QAAQ;oBACR,6BAA6B;oBACjC;oBACA,WAAW;gBACf;;YAEA;0CAAO,IAAM;;QACjB;iCAAG,EAAE;IAEL,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAM;QAAY;kBAC3D;;;;;;AAGb;GArDa;KAAA;AAuDN,MAAM,UAAU;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAW;IAAtC"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/lib/utils.ts"],"sourcesContent":["\r\nimport { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACxB"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/components/ui/button.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n    \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default:\r\n                    \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\r\n                destructive:\r\n                    \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n                outline:\r\n                    \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n                secondary:\r\n                    \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n                ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n                link: \"text-primary underline-offset-4 hover:underline\",\r\n            },\r\n            size: {\r\n                default: \"h-9 px-4 py-2\",\r\n                sm: \"h-8 rounded-md px-3 text-xs\",\r\n                lg: \"h-10 rounded-md px-8\",\r\n                icon: \"h-9 w-9\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n            size: \"default\",\r\n        },\r\n    }\r\n)\r\n\r\nexport interface ButtonProps\r\n    extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n    asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n    ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n        // If we use asChild we'd need @radix-ui/react-slot.\r\n        // I installed clsx, tailwind-merge, cva. I did not install radix-ui/react-slot.\r\n        // I will simplify and remove asChild for now to avoid errors unless necessary.\r\n        const Comp = asChild ? Slot : \"button\"\r\n        return (\r\n            <Comp\r\n                className={cn(buttonVariants({ variant, size, className }))}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACtB,uOACA;IACI,UAAU;QACN,SAAS;YACL,SACI;YACJ,aACI;YACJ,SACI;YACJ,WACI;YACJ,OAAO;YACP,MAAM;QACV;QACA,MAAM;YACF,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACV;IACJ;IACA,iBAAiB;QACb,SAAS;QACT,MAAM;IACV;AACJ;AASJ,MAAM,uBAAS,2KAAgB,MAC3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACtD,oDAAoD;IACpD,gFAAgF;IAChF,+EAA+E;IAC/E,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACI,6LAAC;QACG,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/components/ui/badge.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n    \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default:\r\n                    \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n                secondary:\r\n                    \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n                destructive:\r\n                    \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n                outline: \"text-foreground\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n        },\r\n    }\r\n)\r\n\r\nexport interface BadgeProps\r\n    extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> { }\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n    return (\r\n        <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n    )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACrB,0KACA;IACI,UAAU;QACN,SAAS;YACL,SACI;YACJ,WACI;YACJ,aACI;YACJ,SAAS;QACb;IACJ;IACA,iBAAiB;QACb,SAAS;IACb;AACJ;AAOJ,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACvD,qBACI,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAE5E;KAJS"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/components/Navbar.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { auth } from '@/lib/firebase';\r\nimport { signOut } from 'firebase/auth';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { User, LogOut, Menu, X, Shield, BookOpen, Briefcase, FileText, TrendingUp, LayoutDashboard } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\n\r\n// Helper Components for Active State\r\nconst DesktopNavLink = ({ href, children, icon: Icon }: { href: string; children: React.ReactNode; icon?: any }) => {\r\n    const pathname = usePathname();\r\n    const isActive = pathname === href || pathname?.startsWith(`${href}/`);\r\n\r\n    return (\r\n        <Link\r\n            href={href}\r\n            className={cn(\r\n                \"group flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200\",\r\n                isActive\r\n                    ? \"text-white bg-white/10 shadow-[0_0_15px_rgba(59,130,246,0.3)] border border-white/5\"\r\n                    : \"text-slate-400 hover:text-white hover:bg-white/5\"\r\n            )}\r\n        >\r\n            {Icon && <Icon className={cn(\"w-4 h-4 transition-colors\", isActive ? \"text-blue-400\" : \"text-slate-500 group-hover:text-blue-400\")} />}\r\n            <span>{children}</span>\r\n        </Link>\r\n    );\r\n};\r\n\r\nconst MobileNavLink = ({ href, children, onClick }: { href: string; children: React.ReactNode; onClick: () => void }) => {\r\n    const pathname = usePathname();\r\n    const isActive = pathname === href;\r\n\r\n    return (\r\n        <Link\r\n            href={href}\r\n            onClick={onClick}\r\n            className={cn(\r\n                \"block px-3 py-2 rounded-md text-base font-medium transition-colors\",\r\n                isActive ? \"bg-primary/20 text-white\" : \"text-slate-300 hover:bg-white/5 hover:text-white\"\r\n            )}\r\n        >\r\n            {children}\r\n        </Link>\r\n    );\r\n};\r\n\r\nconst Navbar = () => {\r\n    const { user, role, loading } = useAuth();\r\n    const [mobileMenuOpen, setMobileMenuOpen] = React.useState(false);\r\n    const router = useRouter();\r\n\r\n    const handleSignOut = async () => {\r\n        try {\r\n            await signOut(auth);\r\n            setMobileMenuOpen(false);\r\n            router.push('/login');\r\n        } catch (error: any) {\r\n            console.error(\"Error signing out\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <nav className=\"fixed top-0 w-full z-50 bg-[#0F172A]/85 backdrop-blur-md border-b border-white/10 shadow-lg transition-all\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"flex justify-between h-16 items-center\">\r\n                    {/* Logo */}\r\n                    <div className=\"flex-shrink-0 flex items-center\">\r\n                        <Link href=\"/\" className=\"font-bold text-2xl tracking-tighter flex items-center gap-2 group\" onClick={() => setMobileMenuOpen(false)}>\r\n                            <div className=\"w-8 h-8 rounded-lg bg-primary flex items-center justify-center text-primary-foreground shadow-lg group-hover:scale-105 transition-transform\">\r\n                                <Shield className=\"w-5 h-5\" />\r\n                            </div>\r\n                            <span className=\"bg-gradient-to-r from-white to-white/70 bg-clip-text text-transparent group-hover:to-primary/80 transition-all\">AEGIS+</span>\r\n                        </Link>\r\n                    </div>\r\n\r\n                    {/* Desktop Menu */}\r\n                    <div className=\"hidden md:flex space-x-1 items-center\">\r\n                        {user && <DesktopNavLink href=\"/dashboard\" icon={LayoutDashboard}>Dashboard</DesktopNavLink>}\r\n\r\n                        {role === 'student' && (\r\n                            <>\r\n                                <DesktopNavLink href=\"/grievances\" icon={FileText}>Grievances</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/student/courses\" icon={BookOpen}>Academics</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/resources\" icon={BookOpen}>Resources</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/opportunities\" icon={Briefcase}>Careers</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/student/ledger\" icon={FileText}>Ledger</DesktopNavLink>\r\n                            </>\r\n                        )}\r\n\r\n                        {role === 'faculty' && (\r\n                            <>\r\n                                <DesktopNavLink href=\"/faculty/upload\" icon={BookOpen}>Upload</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/faculty/resources\" icon={FileText}>Resources</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/faculty/opportunities\" icon={Briefcase}>Post Job</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/faculty/my-opportunities\" icon={Briefcase}>My Jobs</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/faculty/applications\" icon={User}>Applicants</DesktopNavLink>\r\n                            </>\r\n                        )}\r\n\r\n                        {role === 'authority' && (\r\n                            <>\r\n                                <DesktopNavLink href=\"/authority/grievances\" icon={Shield}>Grievances</DesktopNavLink>\r\n                            </>\r\n                        )}\r\n\r\n                        {role === 'admin' && (\r\n                            <>\r\n                                <DesktopNavLink href=\"/admin/users\" icon={User}>Users</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/admin/analytics\" icon={TrendingUp}>Analytics</DesktopNavLink>\r\n                                <DesktopNavLink href=\"/admin/audit-logs\" icon={FileText}>Audit Logs</DesktopNavLink>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Auth Buttons */}\r\n                    <div className=\"hidden md:flex items-center space-x-4\">\r\n                        {user ? (\r\n                            <div className=\"flex items-center space-x-4\">\r\n                                <div className=\"flex flex-col items-end\">\r\n                                    <span className=\"text-sm font-medium leading-none text-white/90\">\r\n                                        {user.email ? user.email.split('@')[0] : 'User'}\r\n                                    </span>\r\n                                    <Badge variant=\"outline\" className=\"mt-1 text-[10px] px-2 h-4 uppercase tracking-wider font-bold border-primary/50 text-primary bg-primary/10\">\r\n                                        {loading ? <span className=\"animate-pulse\">...</span> : (role || 'guest')}\r\n                                    </Badge>\r\n                                </div>\r\n                                <Button variant=\"ghost\" size=\"icon\" onClick={handleSignOut} title=\"Sign Out\" className=\"text-muted-foreground hover:text-red-400 hover:bg-red-950/30\">\r\n                                    <LogOut className=\"w-5 h-5\" />\r\n                                </Button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <Link href=\"/login\">\r\n                                    <Button variant=\"ghost\" className=\"text-white hover:bg-white/10\">Login</Button>\r\n                                </Link>\r\n                                <Link href=\"/register\">\r\n                                    <Button className=\"bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20\">Get Started</Button>\r\n                                </Link>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Mobile Menu Button */}\r\n                    <div className=\"md:hidden flex items-center\">\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className=\"text-white hover:bg-white/10\">\r\n                            {mobileMenuOpen ? <X className=\"w-6 h-6\" /> : <Menu className=\"w-6 h-6\" />}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Mobile Menu */}\r\n            {mobileMenuOpen && (\r\n                <div className=\"md:hidden bg-[#0F172A]/95 backdrop-blur-xl border-b border-white/10 p-4 space-y-4 shadow-2xl animate-in slide-in-from-top-5\">\r\n                    <div className=\"space-y-2\">\r\n                        {user && <MobileNavLink href=\"/dashboard\" onClick={() => setMobileMenuOpen(false)}>Dashboard</MobileNavLink>}\r\n\r\n                        {role === 'student' && (\r\n                            <>\r\n                                <MobileNavLink href=\"/grievances\" onClick={() => setMobileMenuOpen(false)}>Grievances</MobileNavLink>\r\n                                <MobileNavLink href=\"/student/courses\" onClick={() => setMobileMenuOpen(false)}>Academics</MobileNavLink>\r\n                                <MobileNavLink href=\"/resources\" onClick={() => setMobileMenuOpen(false)}>Resources</MobileNavLink>\r\n                                <MobileNavLink href=\"/opportunities\" onClick={() => setMobileMenuOpen(false)}>Careers</MobileNavLink>\r\n                                <MobileNavLink href=\"/student/ledger\" onClick={() => setMobileMenuOpen(false)}>Ledger</MobileNavLink>\r\n                            </>\r\n                        )}\r\n                        {role === 'faculty' && <MobileNavLink href=\"/faculty/upload\" onClick={() => setMobileMenuOpen(false)}>Upload</MobileNavLink>}\r\n                        {role === 'authority' && <MobileNavLink href=\"/authority/grievances\" onClick={() => setMobileMenuOpen(false)}>Grievances</MobileNavLink>}\r\n                        {role === 'admin' && <MobileNavLink href=\"/admin/users\" onClick={() => setMobileMenuOpen(false)}>Users</MobileNavLink>}\r\n                    </div>\r\n                    <div className=\"pt-4 border-t border-white/10\">\r\n                        {user ? (\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div className=\"flex flex-col\">\r\n                                    <span className=\"text-sm font-medium text-white\">{user.email}</span>\r\n                                    <span className=\"text-xs text-muted-foreground capitalize\">{role}</span>\r\n                                </div>\r\n                                <Button variant=\"destructive\" size=\"sm\" onClick={handleSignOut}>Sign Out</Button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"flex flex-col space-y-2\">\r\n                                <Link href=\"/login\" className=\"w-full\"><Button variant=\"outline\" className=\"w-full border-white/20 text-white hover:bg-white/10\">Login</Button></Link>\r\n                                <Link href=\"/register\" className=\"w-full\"><Button className=\"w-full\">Get Started</Button></Link>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default Navbar;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 966, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/components/ConditionalNavbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport Navbar from './Navbar';\r\n\r\ninterface ConditionalNavbarProps {\r\n    children: React.ReactNode;\r\n}\r\n\r\nexport default function ConditionalNavbar({ children }: ConditionalNavbarProps) {\r\n    const pathname = usePathname();\r\n    const { user, loading } = useAuth();\r\n\r\n    // Hide navbar on landing page for unauthenticated users\r\n    const isLandingPage = pathname === '/';\r\n    const shouldHideNavbar = isLandingPage && !user && !loading;\r\n\r\n    // Also hide padding on landing page\r\n    const shouldHidePadding = isLandingPage && !user;\r\n\r\n    if (shouldHideNavbar) {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <main className={shouldHidePadding ? \"min-h-screen\" : \"pt-20 min-h-screen max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\"}>\r\n                {children}\r\n            </main>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;;;AALA;;;;AAWe,SAAS,kBAAkB,EAAE,QAAQ,EAA0B;;IAC1E,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,4IAAO;IAEjC,wDAAwD;IACxD,MAAM,gBAAgB,aAAa;IACnC,MAAM,mBAAmB,iBAAiB,CAAC,QAAQ,CAAC;IAEpD,oCAAoC;IACpC,MAAM,oBAAoB,iBAAiB,CAAC;IAE5C,IAAI,kBAAkB;QAClB,qBAAO;sBAAG;;IACd;IAEA,qBACI;;0BACI,6LAAC,0IAAM;;;;;0BACP,6LAAC;gBAAK,WAAW,oBAAoB,iBAAiB;0BACjD;;;;;;;;AAIjB;GAvBwB;;QACH,oJAAW;QACF,4IAAO;;;KAFb"}},
    {"offset": {"line": 1028, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/components/ui/input.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface InputProps\r\n    extends React.InputHTMLAttributes<HTMLInputElement> { }\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n    ({ className, type, ...props }, ref) => {\r\n        return (\r\n            <input\r\n                type={type}\r\n                className={cn(\r\n                    \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAKA,MAAM,sBAAQ,2KAAgB,MAC1B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC5B,qBACI,6LAAC;QACG,MAAM;QACN,WAAW,IAAA,4HAAE,EACT,yUACA;QAEJ,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;;AAEJ,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 1063, "column": 0}, "map": {"version":3,"sources":["file:///D:/DELL/Documents/AEGIS/frontend/src/components/AIWidget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Sparkles, X, MessageSquare, Send, Bot, User, Minimize2, Maximize2, Loader2, Wand2, Trash2 } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\ninterface Message {\r\n    id: string;\r\n    role: 'user' | 'assistant';\r\n    content: string;\r\n    toolCalls?: any[];\r\n}\r\n\r\nexport const AIWidget = () => {\r\n    const { user, role, loading: authLoading } = useAuth();\r\n    const pathname = usePathname();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isMinimized, setIsMinimized] = useState(false);\r\n    const [input, setInput] = useState(\"\");\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Auto-scroll to bottom\r\n    useEffect(() => {\r\n        if (scrollRef.current) {\r\n            scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n        }\r\n    }, [messages]);\r\n\r\n    const handleSend = async () => {\r\n        if (!input.trim() || !user) return;\r\n\r\n        const userMessage: Message = {\r\n            id: Date.now().toString(),\r\n            role: 'user',\r\n            content: input\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInput(\"\");\r\n        setLoading(true);\r\n\r\n        try {\r\n            const token = await user.getIdToken();\r\n            const baseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n\r\n            const limitedHistory = messages.slice(-10).map(m => ({\r\n                role: m.role === 'user' ? 'user' : 'model',\r\n                parts: [{ text: m.content }]\r\n            }));\r\n\r\n            const response = await fetch(`${baseUrl}/ai/chat`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    message: input,\r\n                    history: limitedHistory,\r\n                    context: {\r\n                        location: pathname\r\n                    }\r\n                })\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to fetch AI response');\r\n\r\n            const data = await response.json();\r\n\r\n            const assistantMessage: Message = {\r\n                id: (Date.now() + 1).toString(),\r\n                role: 'assistant',\r\n                content: data.content,\r\n                toolCalls: data.toolCalls\r\n            };\r\n\r\n            setMessages(prev => [...prev, assistantMessage]);\r\n        } catch (error) {\r\n            console.error(\"AI Widget Error:\", error);\r\n            setMessages(prev => [...prev, {\r\n                id: Date.now().toString(),\r\n                role: 'assistant',\r\n                content: \"I'm sorry, I'm having trouble connecting to the AEGIS intelligence systems right now. Please try again later.\"\r\n            }]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const clearChat = () => {\r\n        setMessages([]);\r\n    };\r\n\r\n    if (authLoading || !user) return null;\r\n\r\n    return (\r\n        <div className=\"fixed bottom-6 right-6 z-50 flex flex-col items-end\">\r\n            <AnimatePresence>\r\n                {isOpen && !isMinimized && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n                        animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                        exit={{ opacity: 0, y: 20, scale: 0.95 }}\r\n                        className=\"mb-4 w-[400px] h-[600px] flex flex-col shadow-2xl rounded-2xl overflow-hidden border border-white/10 bg-[#0F172A]/95 backdrop-blur-xl\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"bg-gradient-to-r from-slate-900 to-slate-800 p-4 flex items-center justify-between text-white border-b border-white/5\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"bg-primary/20 p-2 rounded-lg backdrop-blur-sm border border-primary/20\">\r\n                                    <Sparkles className=\"w-5 h-5 text-primary\" />\r\n                                </div>\r\n                                <div className=\"flex flex-col\">\r\n                                    <h3 className=\"font-bold text-sm tracking-wide\">AEGIS Copilot</h3>\r\n                                    <p className=\"text-[10px] text-slate-400 font-medium uppercase tracking-widest\">{role} Intelligence</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-1\">\r\n                                {messages.length > 0 && (\r\n                                    <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-slate-400 hover:text-white hover:bg-white/10 transition-colors\" onClick={clearChat} title=\"Clear conversation\">\r\n                                        <Trash2 className=\"w-4 h-4\" />\r\n                                    </Button>\r\n                                )}\r\n                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-slate-400 hover:text-white hover:bg-white/10 transition-colors\" onClick={() => setIsMinimized(true)}>\r\n                                    <Minimize2 className=\"w-4 h-4\" />\r\n                                </Button>\r\n                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-slate-400 hover:text-white hover:bg-white/10 transition-colors\" onClick={() => setIsOpen(false)}>\r\n                                    <X className=\"w-4 h-4\" />\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Messages Area */}\r\n                        <div\r\n                            ref={scrollRef}\r\n                            className=\"flex-1 overflow-y-auto p-4 space-y-5 scrollbar-hide bg-gradient-to-b from-transparent to-black/20\"\r\n                        >\r\n                            {messages.length === 0 && (\r\n                                <div className=\"flex flex-col items-center justify-center h-full text-center space-y-5 p-6 opacity-90\">\r\n                                    <div className=\"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center border border-primary/20 shadow-[0_0_30px_rgba(59,130,246,0.2)]\">\r\n                                        <Wand2 className=\"w-10 h-10 text-primary animate-pulse\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <h4 className=\"font-bold text-lg text-white\">Welcome, {role === 'student' ? 'Scholar' : role}!</h4>\r\n                                        <p className=\"text-sm text-slate-400 leading-relaxed max-w-[280px] mx-auto\">\r\n                                            {role === 'student' && \"Report grievances, explore academic paths, or refine your professional profile.\"}\r\n                                            {role === 'faculty' && \"Manage research opportunities and evaluate incoming applications.\"}\r\n                                            {role === 'authority' && \"Resolve grievances and prioritize institutional actions.\"}\r\n                                            {role === 'admin' && \"Monitor system health and analyze platform metrics.\"}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"flex flex-wrap gap-2 justify-center pt-2\">\r\n                                        {role === 'student' && [\"Report issue\", \"Find internships\", \"Resume help\"].map(suggestion => (\r\n                                            <Button\r\n                                                key={suggestion}\r\n                                                variant=\"outline\"\r\n                                                size=\"sm\"\r\n                                                className=\"text-xs rounded-full h-8 border-white/10 bg-white/5 text-slate-300 hover:bg-primary/20 hover:text-white hover:border-primary/50 transition-all font-normal\"\r\n                                                onClick={() => setInput(suggestion)}\r\n                                            >\r\n                                                {suggestion}\r\n                                            </Button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {messages.map((message) => (\r\n                                <div key={message.id} className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                                    <div className={`flex gap-3 max-w-[85%] ${message.role === 'user' ? 'flex-row-reverse' : ''}`}>\r\n                                        <div className={`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 shadow-lg ${message.role === 'user'\r\n                                                ? 'bg-primary text-white ring-2 ring-primary/30'\r\n                                                : 'bg-slate-800 border border-white/10 text-primary'\r\n                                            }`}>\r\n                                            {message.role === 'user' ? <User className=\"w-4 h-4\" /> : <Bot className=\"w-4 h-4\" />}\r\n                                        </div>\r\n                                        <div className={`p-3.5 rounded-2xl text-sm leading-relaxed shadow-md backdrop-blur-sm ${message.role === 'user'\r\n                                            ? 'bg-primary text-white rounded-tr-sm'\r\n                                            : 'bg-[#1E293B]/80 border border-white/10 text-slate-200 rounded-tl-sm'\r\n                                            }`}>\r\n                                            <div className=\"markdown-content\">\r\n                                                <ReactMarkdown\r\n                                                    components={{\r\n                                                        ul: ({ node, ...props }) => <ul className=\"list-disc pl-5 mb-2 space-y-1\" {...props} />,\r\n                                                        ol: ({ node, ...props }) => <ol className=\"list-decimal pl-5 mb-2 space-y-1\" {...props} />,\r\n                                                        li: ({ node, ...props }) => <li className=\"mb-1 leading-normal pl-1\" {...props} />,\r\n                                                        p: ({ node, ...props }) => <p className=\"mb-2 last:mb-0 leading-relaxed\" {...props} />,\r\n                                                        a: ({ node, ...props }) => <a className=\"text-blue-400 underline underline-offset-2 hover:text-blue-300 font-medium\" target=\"_blank\" rel=\"noopener noreferrer\" {...props} />,\r\n                                                        strong: ({ node, ...props }) => <strong className=\"font-semibold text-white\" {...props} />,\r\n                                                        blockquote: ({ node, ...props }) => <blockquote className=\"border-l-4 border-primary/40 pl-4 italic my-2 text-slate-400 bg-white/5 py-1 pr-2 rounded-r\" {...props} />,\r\n                                                        code: ({ node, ...props }) => <code className=\"bg-black/30 px-1.5 py-0.5 rounded text-[12px] font-mono text-emerald-400 border border-white/5\" {...props} />,\r\n                                                        // @ts-ignore\r\n                                                        pre: ({ node, ...props }) => <pre className=\"bg-black/40 p-3 rounded-lg overflow-x-auto my-2 border border-white/10\" {...props} />\r\n                                                    }}\r\n                                                >\r\n                                                    {message.content}\r\n                                                </ReactMarkdown>\r\n                                            </div>\r\n\r\n                                            {message.toolCalls && message.toolCalls.length > 0 && (\r\n                                                <div className=\"mt-3 pt-2 border-t border-white/10\">\r\n                                                    {message.toolCalls.map((tc, idx) => (\r\n                                                        <div key={idx} className=\"flex items-center gap-2 text-[10px] font-bold text-emerald-400 bg-emerald-950/30 px-2 py-1.5 rounded border border-emerald-500/20\">\r\n                                                            <Loader2 className=\"w-3 h-3 animate-spin text-emerald-500\" />\r\n                                                            Processing: {tc.name}\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {loading && (\r\n                                <div className=\"flex justify-start\">\r\n                                    <div className=\"flex gap-3 max-w-[85%]\">\r\n                                        <div className=\"w-8 h-8 rounded-lg bg-slate-800 border border-white/10 flex items-center justify-center shrink-0\">\r\n                                            <Bot className=\"w-4 h-4 text-primary\" />\r\n                                        </div>\r\n                                        <div className=\"bg-[#1E293B]/80 border border-white/10 p-4 rounded-2xl rounded-tl-sm shadow-md\">\r\n                                            <div className=\"flex gap-1.5\">\r\n                                                <span className=\"w-2 h-2 bg-primary/60 rounded-full animate-bounce\" />\r\n                                                <span className=\"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-delay:0.2s]\" />\r\n                                                <span className=\"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-delay:0.4s]\" />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Input Area */}\r\n                        <div className=\"p-4 bg-slate-900/80 border-t border-white/10 backdrop-blur-md\">\r\n                            <form\r\n                                onSubmit={(e) => { e.preventDefault(); handleSend(); }}\r\n                                className=\"relative flex items-center gap-2\"\r\n                            >\r\n                                <Input\r\n                                    value={input}\r\n                                    onChange={(e) => setInput(e.target.value)}\r\n                                    placeholder={`Message ${role === 'student' ? 'Copilot' : 'AI'}...`}\r\n                                    className=\"pr-12 bg-slate-800/50 border-white/10 text-slate-100 placeholder:text-slate-500 focus-visible:ring-primary/50 focus-visible:border-primary/50 h-12 rounded-xl shadow-inner transition-all\"\r\n                                    disabled={loading}\r\n                                />\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    size=\"icon\"\r\n                                    className=\"absolute right-1.5 top-1.5 h-9 w-9 rounded-lg shadow-lg bg-primary hover:bg-primary/90 text-white transition-all hover:scale-105\"\r\n                                    disabled={loading || !input.trim()}\r\n                                >\r\n                                    <Send className=\"w-4 h-4\" />\r\n                                </Button>\r\n                            </form>\r\n                            <div className=\"flex items-center justify-center gap-2 mt-3 opacity-60 hover:opacity-100 transition-opacity\">\r\n                                <Sparkles className=\"w-3 h-3 text-primary\" />\r\n                                <p className=\"text-[10px] text-center text-slate-500 font-medium\">\r\n                                    Powered by Vertex AI â€¢ Secure Context\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Toggle Button / Floating Action Button */}\r\n            <div className=\"flex items-center gap-3\">\r\n                <AnimatePresence>\r\n                    {isMinimized && (\r\n                        <motion.button\r\n                            initial={{ opacity: 0, x: 20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            exit={{ opacity: 0, x: 20 }}\r\n                            onClick={() => setIsMinimized(false)}\r\n                            className=\"bg-primary text-white px-4 py-2 rounded-full shadow-xl font-bold text-sm flex items-center gap-2 border-2 border-white/10 hover:bg-primary/90 transition-all\"\r\n                        >\r\n                            <Maximize2 className=\"w-4 h-4\" />\r\n                            Expand Copilot\r\n                        </motion.button>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                <motion.button\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    animate={{\r\n                        boxShadow: isOpen ? \"0 0 0 0px rgba(99, 102, 241, 0)\" : [\"0 0 0 0px rgba(99, 102, 241, 0.4)\", \"0 0 0 10px rgba(99, 102, 241, 0)\"]\r\n                    }}\r\n                    transition={{\r\n                        boxShadow: {\r\n                            duration: 2,\r\n                            repeat: Infinity,\r\n                            ease: \"easeOut\"\r\n                        }\r\n                    }}\r\n                    onClick={() => {\r\n                        setIsOpen(!isOpen);\r\n                        setIsMinimized(false);\r\n                    }}\r\n                    className={`h-14 w-14 rounded-full flex items-center justify-center shadow-2xl transition-all duration-300 border-2 border-white/20 ${isOpen\r\n                        ? 'bg-rose-500 text-white rotate-90 scale-90'\r\n                        : 'bg-indigo-600 text-white hover:bg-indigo-700'\r\n                        }`}\r\n                >\r\n                    {isOpen ? <X className=\"w-6 h-6\" /> : <MessageSquare className=\"w-6 h-6\" />}\r\n                </motion.button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}}]
}