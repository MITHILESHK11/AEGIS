module.exports=[89531,a=>{"use strict";var b=a.i(87924),c=a.i(56025),d=a.i(50944),e=a.i(72131);a.s(["default",0,({children:a,allowedRoles:f})=>{let{user:g,loading:h,role:i}=(0,c.useAuth)(),j=(0,d.useRouter)();return((0,e.useEffect)(()=>{h||g?!h&&g&&f&&!f.includes(i||"student")&&j.push("/unauthorized"):j.push("/login")},[g,h,i,f,j]),h)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):g&&(!f||f.includes(i||"student"))?(0,b.jsx)(b.Fragment,{children:a}):null}])},27960,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-muted",a),...d})}a.s(["Skeleton",()=>d])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},6015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},84505,a=>{"use strict";let b=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],84505)},77156,a=>{"use strict";let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},58089,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(89531),f=a.i(91119),g=a.i(6015),h=a.i(86304),i=a.i(99570),j=a.i(27960),k=a.i(4720),l=a.i(84505),m=a.i(81560),n=a.i(77156);function o(){let{user:a}=(0,d.useAuth)(),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),s=async()=>{if(a)try{let b=await a.getIdToken(),c=await fetch("http://localhost:5000/api/academic/list",{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch resources");let d=(await c.json()).filter(b=>b.uploadedBy===a.uid);p(d)}catch(a){console.error(a)}finally{r(!1)}};(0,c.useEffect)(()=>{s()},[a]);let t=async b=>{if(confirm("Are you sure you want to delete this resource? This action cannot be undone."))try{let c=await a?.getIdToken();if(!(await fetch(`http://localhost:5000/api/academic/delete/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}})).ok)throw Error("Failed to delete resource");p(o.filter(a=>a.resourceId!==b))}catch(a){console.error(a),alert("Failed to delete resource")}};return(0,b.jsx)(e.default,{allowedRoles:["faculty","admin"],children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Manage Resources"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"View and manage your uploaded academic resources."})]}),(0,b.jsx)(i.Button,{onClick:s,children:"Refresh"})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{children:["My Uploaded Resources (",o.length,")"]})}),(0,b.jsx)(f.CardContent,{children:q?(0,b.jsx)("div",{className:"space-y-2",children:[1,2,3,4].map(a=>(0,b.jsx)(j.Skeleton,{className:"h-16 w-full"},a))}):0===o.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(k.FileText,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No resources uploaded yet."})]}):(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{children:"Title"}),(0,b.jsx)(g.TableHead,{children:"Course"}),(0,b.jsx)(g.TableHead,{children:"Type"}),(0,b.jsx)(g.TableHead,{children:"Uploaded"}),(0,b.jsx)(g.TableHead,{children:"Downloads"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(g.TableBody,{children:o.map(a=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.title}),a.description&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground line-clamp-1",children:a.description})]})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"outline",children:a.courseId})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(h.Badge,{className:(a=>{switch(a){case"Notes":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"Paper":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"Slides":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"Assignment":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}})(a.resourceType),children:a.resourceType})}),(0,b.jsx)(g.TableCell,{className:"text-sm text-muted-foreground",children:a.createdAt?._seconds?new Date(1e3*a.createdAt._seconds).toLocaleDateString():"N/A"}),(0,b.jsx)(g.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(l.Download,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"text-sm",children:a.downloadCount||0})]})}),(0,b.jsx)(g.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",asChild:!0,title:"View File",children:(0,b.jsx)("a",{href:a.fileUrl,target:"_blank",rel:"noopener noreferrer",children:(0,b.jsx)(n.Eye,{className:"w-4 h-4"})})}),(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>t(a.resourceId),className:"text-destructive hover:text-destructive",title:"Delete Resource",children:(0,b.jsx)(m.Trash2,{className:"w-4 h-4"})})]})})]},a.resourceId))})]})})]})]})})}a.s(["default",()=>o])}];

//# sourceMappingURL=_39369f15._.js.map