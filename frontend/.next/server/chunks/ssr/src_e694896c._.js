module.exports=[89531,a=>{"use strict";var b=a.i(87924),c=a.i(56025),d=a.i(50944),e=a.i(72131);a.s(["default",0,({children:a,allowedRoles:f})=>{let{user:g,loading:h,role:i}=(0,c.useAuth)(),j=(0,d.useRouter)();return((0,e.useEffect)(()=>{h||g?!h&&g&&f&&!f.includes(i||"student")&&j.push("/unauthorized"):j.push("/login")},[g,h,i,f,j]),h)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):g&&(!f||f.includes(i||"student"))?(0,b.jsx)(b.Fragment,{children:a}):null}])},27960,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-muted",a),...d})}a.s(["Skeleton",()=>d])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},28395,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(89531),f=a.i(91119),g=a.i(86304),h=a.i(27960);function i(){let{user:a}=(0,d.useAuth)(),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{(async()=>{if(a)try{let b=await a.getIdToken(),c=await fetch("http://localhost:5000/api/grievances/list?status=Resolved",{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch history");let d=await c.json();j(d)}catch(a){console.error(a)}finally{l(!1)}})()},[a]),(0,b.jsx)(e.default,{allowedRoles:["authority","admin"],children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Resolved History"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Archive of resolved grievances and actions taken."})]}),k?(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)(h.Skeleton,{className:"h-24 w-full"},a))}):0===i.length?(0,b.jsx)(f.Card,{className:"text-center p-12 text-muted-foreground",children:"No resolved grievances found."}):(0,b.jsx)("div",{className:"grid gap-4",children:i.map(a=>(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(f.CardTitle,{className:"text-base font-semibold",children:["#",a.grievanceId.slice(0,8)," - ",a.category," Issue"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(1e3*a.createdAt._seconds).toLocaleDateString()})]}),(0,b.jsx)(g.Badge,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-900 border-green-200",children:"Resolved"})]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("p",{className:"text-sm",children:a.description}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t text-sm bg-muted/40 p-2 rounded",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Resolution: "}),a.timeline?.find(a=>"Resolved"===a.status)?.remark||"No remarks provided."]})]})]},a.grievanceId))})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_e694896c._.js.map