module.exports=[89531,a=>{"use strict";var b=a.i(87924),c=a.i(56025),d=a.i(50944),e=a.i(72131);a.s(["default",0,({children:a,allowedRoles:f})=>{let{user:g,loading:h,role:i}=(0,c.useAuth)(),j=(0,d.useRouter)();return((0,e.useEffect)(()=>{h||g?!h&&g&&f&&!f.includes(i||"student")&&j.push("/unauthorized"):j.push("/login")},[g,h,i,f,j]),h)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):g&&(!f||f.includes(i||"student"))?(0,b.jsx)(b.Fragment,{children:a}):null}])},27960,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-muted",a),...d})}a.s(["Skeleton",()=>d])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},90669,a=>{"use strict";let b=(0,a.i(70106).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);a.s(["Activity",()=>b],90669)},76021,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(89531),f=a.i(91119),g=a.i(86304),h=a.i(27960);let i=(0,a.i(70106).default)("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]);var j=a.i(90669),k=a.i(16201),l=a.i(41710);function m(){let{user:a}=(0,d.useAuth)(),[m,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{(async()=>{if(a)try{let b=await a.getIdToken(),c=await fetch("http://localhost:5000/api/grievances/stats",{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch stats");let d=await c.json();o(d)}catch(a){console.error(a)}finally{q(!1)}})()},[a]),(0,b.jsx)(e.default,{allowedRoles:["authority","admin"],children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Department Statistics"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Overview of grievance resolution performance."})]}),p?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>(0,b.jsx)(h.Skeleton,{className:"h-32 rounded-xl"},a))}):m?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsx)(n,{title:"Total Grievances",value:m.total,icon:j.Activity,color:"text-blue-600",subtext:"All time reports"}),(0,b.jsx)(n,{title:"Pending Review",value:m.pending,icon:l.Clock,color:"text-yellow-600",subtext:"Awaiting action"}),(0,b.jsx)(n,{title:"Resolved",value:m.resolved,icon:k.CheckCircle,color:"text-green-600",subtext:"Successfully closed"}),(0,b.jsx)(n,{title:"Resolution Rate",value:m.total>0?`${Math.round(m.resolved/m.total*100)}%`:"0%",icon:i,color:"text-purple-600",subtext:"Success metric"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(f.Card,{className:"h-full",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Issues by Category"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[Object.entries(m.byCategory||{}).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-muted/50 rounded transition",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary"}),(0,b.jsx)("span",{className:"font-medium",children:a})]}),(0,b.jsx)(g.Badge,{variant:"secondary",children:c})]},a)),0===Object.keys(m.byCategory||{}).length&&(0,b.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No data to display."})]})})]}),(0,b.jsxs)(f.Card,{className:"h-full bg-gradient-to-br from-primary/5 to-transparent border-primary/10",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Performance Insights"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("p",{children:["Your department's resolution rate is currently tracking at",(0,b.jsxs)("span",{className:"font-bold text-foreground",children:[" ",m.total>0?`${Math.round(m.resolved/m.total*100)}%`:"0%"]}),"."]}),(0,b.jsxs)("p",{children:["The most common issue category is ",(0,b.jsx)("span",{className:"font-bold text-foreground",children:Object.entries(m.byCategory||{}).sort((a,b)=>b[1]-a[1])[0]?.[0]||"None"}),"."]}),(0,b.jsxs)("div",{className:"mt-4 p-4 bg-background rounded-lg border shadow-sm",children:[(0,b.jsx)("h4",{className:"font-semibold text-foreground mb-1",children:"Recommendation"}),(0,b.jsx)("p",{children:"Focus on resolving pending tickets in the high-volume categories to improve student satisfaction."})]})]})]})]})]}):(0,b.jsx)(f.Card,{className:"text-center p-12 text-muted-foreground",children:"No data available."})]})})}let n=({title:a,value:c,icon:d,color:e,subtext:g})=>(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"p-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:a}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:c}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:g})]}),(0,b.jsx)("div",{className:`p-3 rounded-full bg-muted ${e}`,children:(0,b.jsx)(d,{className:"w-6 h-6"})})]})});a.s(["default",()=>m],76021)}];

//# sourceMappingURL=_bd41e0ab._.js.map