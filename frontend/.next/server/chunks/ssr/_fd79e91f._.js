module.exports=[41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},95174,a=>{"use strict";let b=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["default",()=>b])},89531,a=>{"use strict";var b=a.i(87924),c=a.i(56025),d=a.i(50944),e=a.i(72131);a.s(["default",0,({children:a,allowedRoles:f})=>{let{user:g,loading:h,role:i}=(0,c.useAuth)(),j=(0,d.useRouter)();return((0,e.useEffect)(()=>{h||g?!h&&g&&f&&!f.includes(i||"student")&&j.push("/unauthorized"):j.push("/login")},[g,h,i,f,j]),h)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):g&&(!f||f.includes(i||"student"))?(0,b.jsx)(b.Fragment,{children:a}):null}])},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},90669,a=>{"use strict";let b=(0,a.i(70106).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);a.s(["Activity",()=>b],90669)},44893,a=>{"use strict";var b=a.i(95174);a.s(["CircleAlert",()=>b.default])},24987,a=>{"use strict";let b=(0,a.i(70106).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},37264,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(56025),f=a.i(89531),g=a.i(99570),h=a.i(44893),i=a.i(16201),j=a.i(90669),k=a.i(41710),l=a.i(70106);let m=(0,l.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var n=a.i(41675),o=a.i(24987),p=a.i(4720);let q=(0,l.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),r=(0,l.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function s({params:a}){let{user:l}=(0,e.useAuth)(),s=(0,d.useRouter)(),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)("");return((0,c.useEffect)(()=>{(async()=>{if(!l)return;let b=(await a).id;try{let a=await l.getIdToken(),c=await fetch("http://localhost:5000/api/grievances/list",{headers:{Authorization:`Bearer ${a}`}});if(!c.ok)throw Error("Failed to fetch grievance");let d=(await c.json()).find(a=>a.grievanceId===b);d?u(d):y("Grievance not found or access denied.")}catch(a){console.error(a),y(a.message)}finally{w(!1)}})()},[l,a]),v)?(0,b.jsxs)("div",{className:"max-w-5xl mx-auto py-10 px-4 space-y-8",children:[(0,b.jsx)("div",{className:"h-8 w-24 bg-slate-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-64 bg-slate-100 rounded-3xl animate-pulse"})]}):x?(0,b.jsx)("div",{className:"max-w-5xl mx-auto py-10 px-4 text-center",children:(0,b.jsxs)("div",{className:"aegis-card p-10 border-red-500/20 bg-red-500/5 rounded-xl",children:[(0,b.jsx)(h.CircleAlert,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Error Loading Grievance"}),(0,b.jsx)("p",{className:"text-red-500",children:x}),(0,b.jsx)(g.Button,{onClick:()=>s.back(),variant:"ghost",className:"mt-6 text-slate-500 hover:text-slate-900",children:"Go Back"})]})}):t?(0,b.jsx)(f.default,{allowedRoles:["student","authority","admin"],children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto py-10 px-4 space-y-6 animate-in fade-in-50",children:[(0,b.jsxs)("button",{onClick:()=>s.back(),className:"flex items-center text-slate-500 hover:text-slate-900 transition-colors group",children:[(0,b.jsx)(m,{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform"}),"Back to Grievances"]}),(0,b.jsxs)("div",{className:"aegis-card overflow-hidden relative bg-white border border-slate-200 shadow-sm rounded-xl",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600"}),(0,b.jsxs)("div",{className:"p-8 md:p-10 space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 border-b border-slate-100 pb-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,b.jsxs)("div",{className:`px-4 py-1.5 rounded-full text-sm font-semibold border flex items-center ${(a=>{switch(a){case"Resolved":return"bg-emerald-500/10 text-emerald-600 border-emerald-500/20";case"In Progress":return"bg-blue-500/10 text-blue-600 border-blue-500/20";case"Review":return"bg-yellow-500/10 text-yellow-600 border-yellow-500/20";default:return"bg-slate-500/10 text-slate-600 border-slate-500/20"}})(t.status)}`,children:[t.status.toUpperCase(),(a=>{switch(a){case"Resolved":return(0,b.jsx)(i.CheckCircle,{className:"w-4 h-4 ml-2"});case"In Progress":return(0,b.jsx)(j.Activity,{className:"w-4 h-4 ml-2 animate-pulse"});case"Review":return(0,b.jsx)(h.CircleAlert,{className:"w-4 h-4 ml-2"});default:return(0,b.jsx)(k.Clock,{className:"w-4 h-4 ml-2"})}})(t.status)]}),(0,b.jsxs)("span",{className:"text-slate-500 text-sm flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"w-4 h-4"}),t.createdAt?._seconds?new Date(1e3*t.createdAt._seconds).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"N/A"]}),(0,b.jsxs)("span",{className:"text-slate-500 text-sm flex items-center gap-2 font-mono bg-slate-50 px-2 py-0.5 rounded border border-slate-200",children:["#",t.grievanceId.slice(0,8)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:[t.category," Issue"]}),(0,b.jsxs)("div",{className:"flex items-center text-slate-500 text-lg",children:[(0,b.jsx)(o.MapPin,{className:"w-5 h-5 mr-2 text-indigo-500"}),t.location]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,b.jsxs)("span",{className:`px-4 py-1.5 rounded-lg text-sm font-medium border ${"Urgent"===t.priority?"bg-red-500/10 text-red-600 border-red-500/20 animate-pulse":"High"===t.priority?"bg-rose-500/10 text-rose-600 border-rose-500/20":"Medium"===t.priority?"bg-orange-500/10 text-orange-600 border-orange-500/20":"bg-emerald-500/10 text-emerald-600 border-emerald-500/20"}`,children:[t.priority," Priority"]}),t.isAnonymous&&(0,b.jsx)("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded border border-slate-200",children:"Submitted Anonymously"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest mb-4 flex items-center",children:[(0,b.jsx)(p.FileText,{className:"w-4 h-4 mr-2"}),"Description"]}),(0,b.jsx)("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-200 leading-relaxed text-slate-700 text-lg",children:t.description})]}),t.photoUrl&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest mb-4 flex items-center",children:[(0,b.jsx)(q,{className:"w-4 h-4 mr-2"}),"Evidence"]}),(0,b.jsx)("div",{className:"relative group rounded-2xl overflow-hidden border border-slate-200 max-w-md bg-slate-50",children:(0,b.jsx)("img",{src:t.photoUrl,alt:"Grievance Evidence",className:"w-full h-auto object-cover transition-transform duration-500 group-hover:scale-105"})})]})]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-200 h-full",children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest mb-6 flex items-center",children:[(0,b.jsx)(r,{className:"w-4 h-4 mr-2"}),"Timeline"]}),(0,b.jsxs)("div",{className:"space-y-0 relative",children:[(0,b.jsx)("div",{className:"absolute left-3.5 top-2 bottom-4 w-0.5 bg-slate-200"}),t.timeline&&t.timeline.length>0?t.timeline.map((a,c)=>(0,b.jsxs)("div",{className:"relative pl-10 pb-8 last:pb-0 group",children:[(0,b.jsx)("div",{className:`absolute left-0 top-1.5 w-7 h-7 rounded-full border-4 border-white z-10 flex items-center justify-center transition-colors shadow-sm ${0===c?"bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]":"bg-slate-300 group-hover:bg-slate-400"}`,children:0===c&&(0,b.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-slate-900 font-medium text-base mb-0.5",children:a.status}),(0,b.jsx)("span",{className:"text-xs text-slate-500 mb-2",children:a.timestamp?new Date(a.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Date not available"}),a.remark&&(0,b.jsxs)("div",{className:"text-sm text-slate-600 bg-white p-3 rounded-lg border border-slate-200 italic shadow-sm",children:['"',a.remark,'"']})]})]},c)):(0,b.jsx)("div",{className:"text-slate-500 text-sm italic pl-4",children:"No timeline events recorded properly."}),(!t.timeline||0===t.timeline.length)&&(0,b.jsxs)("div",{className:"relative pl-10 pb-0",children:[(0,b.jsx)("div",{className:"absolute left-0 top-1.5 w-7 h-7 rounded-full bg-slate-300 border-4 border-white z-10"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-slate-900 font-medium",children:"Ticket Created"}),(0,b.jsx)("span",{className:"text-xs text-slate-500",children:t.createdAt?._seconds?new Date(1e3*t.createdAt._seconds).toLocaleString():"N/A"})]})]})]})]})})]})]})]})]})}):null}a.s(["default",()=>s],37264)}];

//# sourceMappingURL=_fd79e91f._.js.map