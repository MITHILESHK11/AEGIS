module.exports=[89531,a=>{"use strict";var b=a.i(87924),c=a.i(56025),d=a.i(50944),e=a.i(72131);a.s(["default",0,({children:a,allowedRoles:f})=>{let{user:g,loading:h,role:i}=(0,c.useAuth)(),j=(0,d.useRouter)();return((0,e.useEffect)(()=>{h||g?!h&&g&&f&&!f.includes(i||"student")&&j.push("/unauthorized"):j.push("/login")},[g,h,i,f,j]),h)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):g&&(!f||f.includes(i||"student"))?(0,b.jsx)(b.Fragment,{children:a}):null}])},64598,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(56025),f=a.i(89531),g=a.i(20237);a.i(60121);var h=a.i(5420);function i(){let{user:a,role:i}=(0,e.useAuth)(),j=(0,d.useRouter)(),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)({title:"",description:"",courseId:"",resourceType:"Notes",tags:""}),q=a=>{let{name:b,value:c}=a.target;p(a=>({...a,[b]:c}))},r=async b=>{if(b.preventDefault(),!m)return void alert("Please select a file to upload.");l(!0);try{let b=(0,h.ref)(g.storage,`resources/${Date.now()}_${m.name}`),c=await (0,h.uploadBytes)(b,m),d=await (0,h.getDownloadURL)(c.ref),e=await a?.getIdToken();if(!(await fetch("http://localhost:5000/api/academic/upload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({...o,courseId:o.courseId.toUpperCase(),tags:o.tags.split(",").map(a=>a.trim()),fileUrl:d})})).ok)throw Error("Failed to upload resource metadata");alert("Resource uploaded successfully!"),j.push("/dashboard")}catch(a){console.error(a),alert("Error processing upload. Please try again.")}finally{l(!1)}};return(0,b.jsx)(f.default,{allowedRoles:["faculty","admin"],children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto py-10",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:"Upload Academic Resource"}),(0,b.jsxs)("form",{onSubmit:r,className:"space-y-6 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-md border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),(0,b.jsx)("input",{type:"text",name:"title",required:!0,value:o.title,onChange:q,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2",placeholder:"e.g. Data Structures Lecture 1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Course Code"}),(0,b.jsx)("input",{type:"text",name:"courseId",required:!0,value:o.courseId,onChange:q,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2",placeholder:"e.g. CS101"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Resource Type"}),(0,b.jsxs)("select",{name:"resourceType",value:o.resourceType,onChange:q,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2",children:[(0,b.jsx)("option",{children:"Notes"}),(0,b.jsx)("option",{children:"Paper"}),(0,b.jsx)("option",{children:"Slides"}),(0,b.jsx)("option",{children:"Assignment"}),(0,b.jsx)("option",{children:"Other"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),(0,b.jsx)("textarea",{name:"description",rows:3,value:o.description,onChange:q,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"File Upload (Max 50MB)"}),(0,b.jsx)("input",{type:"file",required:!0,onChange:a=>{if(a.target.files&&a.target.files[0]){let b=a.target.files[0];if(b.size>0x3200000)return void alert("File size exceeds 50MB limit.");n(b)}},className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tags (comma separated)"}),(0,b.jsx)("input",{type:"text",name:"tags",value:o.tags,onChange:q,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 p-2",placeholder:"e.g. recursion, sorting, midterm"})]}),(0,b.jsx)("button",{type:"submit",disabled:k,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:k?"Uploading...":"Upload Resource"})]})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_b1f72f07._.js.map