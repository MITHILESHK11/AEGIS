(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61653,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["default",()=>t])},63059,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},11870,e=>{"use strict";var t=e.i(43476),s=e.i(32341),a=e.i(18566),l=e.i(71645);e.s(["default",0,({children:e,allowedRoles:i})=>{let{user:r,loading:d,role:n}=(0,s.useAuth)(),o=(0,a.useRouter)();return((0,l.useEffect)(()=>{d||r?!d&&r&&i&&!i.includes(n||"student")&&o.push("/unauthorized"):o.push("/login")},[r,d,n,i,o]),d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):r&&(!i||i.includes(n||"student"))?(0,t.jsx)(t.Fragment,{children:e}):null}])},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},21218,e=>{"use strict";let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},7621,e=>{"use strict";var t=e.i(61653);e.s(["CircleAlert",()=>t.default])},77590,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),a=e.i(22016),l=e.i(32341),i=e.i(11870),r=e.i(19455),d=e.i(87486),n=e.i(7233);let o=(0,e.i(75254).default)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);var c=e.i(7621),h=e.i(3116),x=e.i(69638),u=e.i(78583),m=e.i(63059),g=e.i(21218);function p(){let{user:e}=(0,l.useAuth)(),[p,v]=(0,s.useState)([]),[f,b]=(0,s.useState)(!0),[y,j]=(0,s.useState)("All");return(0,s.useEffect)(()=>{(async()=>{if(e)try{let t=await e.getIdToken(),s="All"!==y?`?status=${y}`:"",a=await fetch(`http://localhost:5000/api/grievances/list${s}`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw Error("Failed to fetch grievances");let l=await a.json();v(l)}catch(e){console.error(e)}finally{b(!1)}})()},[e,y]),(0,t.jsx)(i.default,{allowedRoles:["student","authority","admin"],children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-indigo-50 to-slate-50 p-8 shadow-2xl border border-slate-200",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:(0,t.jsx)(u.FileText,{className:"w-64 h-64 text-slate-900"})}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col md:flex-row justify-between md:items-end gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-indigo-500/10 rounded-lg border border-indigo-200 backdrop-blur-sm",children:(0,t.jsx)(u.FileText,{className:"w-6 h-6 text-indigo-600"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"My Grievances"})]}),(0,t.jsx)("p",{className:"text-slate-600 max-w-xl text-lg",children:"Track the status of your reported issues and view resolution updates."})]}),(0,t.jsx)(a.default,{href:"/grievances/submit",children:(0,t.jsxs)(r.Button,{className:"bg-indigo-600 hover:bg-indigo-700 text-white border-none shadow-lg shadow-indigo-500/20 text-lg py-6 px-8 rounded-xl w-full md:w-auto",children:[(0,t.jsx)(n.Plus,{className:"mr-2 w-5 h-5"}),"New Grievance"]})})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 overflow-x-auto pb-4 scrollbar-hide",children:[(0,t.jsx)("div",{className:"p-2 bg-slate-100 rounded-full border border-slate-200 mr-2",children:(0,t.jsx)(o,{className:"w-4 h-4 text-slate-500"})}),["All","Submitted","Review","In Progress","Resolved"].map(e=>(0,t.jsx)(r.Button,{variant:y===e?"default":"ghost",size:"sm",onClick:()=>j(e),className:`rounded-full px-4 border transition-all duration-300 ${y===e?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white"}`,children:e},e))]}),f?(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"aegis-card p-6 h-32 animate-pulse flex flex-col justify-center gap-3 bg-white border border-slate-200 shadow-sm rounded-xl",children:[(0,t.jsx)("div",{className:"h-5 bg-slate-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-4 bg-slate-100 rounded w-3/4"})]},e))}):0===p.length?(0,t.jsx)("div",{className:"aegis-card p-12 text-center border-dashed border-2 border-slate-200 bg-transparent shadow-none rounded-xl",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-slate-400",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-6 border border-slate-100",children:(0,t.jsx)(u.FileText,{className:"w-8 h-8 opacity-50 text-slate-400"})}),(0,t.jsx)("h3",{className:"text-xl font-medium text-slate-900 mb-2",children:"No grievances found"}),(0,t.jsx)("p",{className:"mb-6 max-w-sm mx-auto text-slate-500",children:"You haven't submitted any grievances yet. If you're facing an issue on campus, let us know."}),(0,t.jsx)(a.default,{href:"/grievances/submit",children:(0,t.jsx)(r.Button,{variant:"outline",className:"border-indigo-500/30 text-indigo-400 hover:bg-indigo-500/10 hover:text-indigo-300",children:"Submit your first grievance"})})]})}):(0,t.jsx)("div",{className:"grid gap-4",children:p.map(e=>(0,t.jsx)(a.default,{href:`/grievances/${e.grievanceId}`,children:(0,t.jsxs)("div",{className:"aegis-card p-6 group hover:border-indigo-300 transition-all duration-300 relative overflow-hidden bg-white border border-slate-200 shadow-sm rounded-xl",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 relative z-10",children:[(0,t.jsxs)("div",{className:"space-y-3 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs md:text-sm text-slate-500",children:[(0,t.jsxs)("span",{className:"font-mono bg-slate-50 px-2 py-1 rounded border border-slate-200 text-slate-600",children:["#",e.grievanceId.slice(0,8)]}),(0,t.jsx)("span",{className:"w-1 h-1 rounded-full bg-slate-400"}),(0,t.jsx)("span",{children:e.createdAt?._seconds?new Date(100*e.createdAt._seconds).toLocaleDateString():"Just now"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg md:text-xl font-semibold text-slate-900 group-hover:text-indigo-600 transition-colors mb-1",children:[e.category," Issue at ",e.location]}),(0,t.jsx)("p",{className:"text-slate-600 line-clamp-1 max-w-3xl",children:e.description})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full md:w-auto gap-4",children:[(e=>{switch(e){case"Resolved":return(0,t.jsxs)(d.Badge,{variant:"outline",className:"border-emerald-500/20 bg-emerald-500/10 text-emerald-400 flex items-center gap-1.5",children:[(0,t.jsx)(x.CheckCircle,{className:"w-3 h-3"}),"Resolved"]});case"In Progress":return(0,t.jsxs)(d.Badge,{variant:"outline",className:"border-blue-500/20 bg-blue-500/10 text-blue-400 flex items-center gap-1.5",children:[(0,t.jsx)(g.Activity,{className:"w-3 h-3 animate-pulse"}),"In Progress"]});case"Review":return(0,t.jsxs)(d.Badge,{variant:"outline",className:"border-yellow-500/20 bg-yellow-500/10 text-yellow-400 flex items-center gap-1.5",children:[(0,t.jsx)(c.CircleAlert,{className:"w-3 h-3"}),"Review"]});default:return(0,t.jsxs)(d.Badge,{variant:"outline",className:"border-slate-500/20 bg-slate-500/10 text-slate-400 flex items-center gap-1.5",children:[(0,t.jsx)(h.Clock,{className:"w-3 h-3"}),"Submitted"]})}})(e.status),(0,t.jsx)("div",{className:"bg-slate-50 p-2 rounded-full group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-all border border-slate-100",children:(0,t.jsx)(m.ChevronRight,{className:"w-5 h-5 text-slate-400 group-hover:translate-x-0.5 transition-transform"})})]})]})]})},e.grievanceId))})]})})}e.s(["default",()=>p],77590)}]);