(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11870,e=>{"use strict";var t=e.i(43476),s=e.i(32341),a=e.i(18566),l=e.i(71645);e.s(["default",0,({children:e,allowedRoles:r})=>{let{user:i,loading:o,role:d}=(0,s.useAuth)(),n=(0,a.useRouter)();return((0,l.useEffect)(()=>{o||i?!o&&i&&r&&!r.includes(d||"student")&&n.push("/unauthorized"):n.push("/login")},[i,o,d,r,n]),o)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):i&&(!r||r.includes(d||"student"))?(0,t.jsx)(t.Fragment,{children:e}):null}])},2747,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",e),...a})}e.s(["Skeleton",()=>a])},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],61911)},84774,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let l=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("div",{className:"w-full overflow-auto",children:(0,t.jsx)("table",{ref:l,className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})}));l.displayName="Table";let r=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("thead",{ref:l,className:(0,a.cn)("[&_tr]:border-b",e),...s}));r.displayName="TableHeader";let i=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("tbody",{ref:l,className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s}));i.displayName="TableBody",s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("tfoot",{ref:l,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("tr",{ref:l,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let d=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("th",{ref:l,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableHead";let n=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("td",{ref:l,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));n.displayName="TableCell",s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("caption",{ref:l,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption",e.s(["Table",()=>l,"TableBody",()=>i,"TableCell",()=>n,"TableHead",()=>d,"TableHeader",()=>r,"TableRow",()=>o])},81140,34620,e=>{"use strict";function t(e,s,{checkForDefaultPrevented:a=!0}={}){return function(t){if(e?.(t),!1===a||!t.defaultPrevented)return s?.(t)}}"u">typeof window&&window.document&&window.document.createElement,e.s(["composeEventHandlers",()=>t],81140);var s=e.i(71645),a=globalThis?.document?s.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>a],34620)},35804,e=>{"use strict";var t=e.i(71645),s=e.i(34620);function a(e){let[a,l]=t.useState(void 0);return(0,s.useLayoutEffect)(()=>{if(e){l({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let r=t[0];if("borderBoxSize"in r){let e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;l({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}l(void 0)},[e]),a}e.s(["useSize",()=>a])},69340,99682,e=>{"use strict";var t=e.i(71645),s=e.i(34620);t[" useEffectEvent ".trim().toString()],t[" useInsertionEffect ".trim().toString()];var a=t[" useInsertionEffect ".trim().toString()]||s.useLayoutEffect;function l({prop:e,defaultProp:s,onChange:l=()=>{},caller:r}){let[i,o,d]=function({defaultProp:e,onChange:s}){let[l,r]=t.useState(e),i=t.useRef(l),o=t.useRef(s);return a(()=>{o.current=s},[s]),t.useEffect(()=>{i.current!==l&&(o.current?.(l),i.current=l)},[l,i]),[l,r,o]}({defaultProp:s,onChange:l}),n=void 0!==e,c=n?e:i;{let s=t.useRef(void 0!==e);t.useEffect(()=>{let e=s.current;if(e!==n){let t=n?"controlled":"uncontrolled";console.warn(`${r} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}s.current=n},[n,r])}return[c,t.useCallback(t=>{if(n){let s="function"==typeof t?t(e):t;s!==e&&d.current?.(s)}else o(t)},[n,e,o,d])]}function r(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}Symbol("RADIX:SYNC_STATE"),e.s(["useControllableState",()=>l],69340),e.s(["usePrevious",()=>r],99682)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},64659,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],64659)},79002,e=>{"use strict";let t=(0,e.i(75254).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],79002)},48268,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),a=e.i(32341),l=e.i(11870),r=e.i(19455),i=e.i(87486),o=e.i(93479),d=e.i(2747),n=e.i(67489),c=e.i(55436),u=e.i(79002),m=e.i(16715),h=e.i(75254);let x=(0,h.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),f=(0,h.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var b=e.i(69638),p=e.i(61911),g=e.i(84774);function y(){let{user:e}=(0,a.useAuth)(),[h,y]=(0,s.useState)([]),[j,v]=(0,s.useState)([]),[N,w]=(0,s.useState)(!0),[S,T]=(0,s.useState)(""),[k,C]=(0,s.useState)("All"),[A,R]=(0,s.useState)("All"),E=async()=>{if(e){w(!0);try{let t=await e.getIdToken(),s=await fetch("http://localhost:5000/api/admin/users",{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw Error("Failed to fetch users");let a=await s.json();y(a),v(a)}catch(t){console.error(t);let e=[{uid:"1",displayName:"John Doe",email:"john@example.com",role:"student",disabled:!1,metadata:{creationTime:new Date().toISOString()}},{uid:"2",displayName:"Jane Smith",email:"jane@example.com",role:"faculty",disabled:!1,metadata:{creationTime:new Date().toISOString()}},{uid:"3",displayName:"Admin User",email:"admin@example.com",role:"admin",disabled:!1,metadata:{creationTime:new Date().toISOString()}}];y(e),v(e)}finally{w(!1)}}};(0,s.useEffect)(()=>{E()},[e]),(0,s.useEffect)(()=>{let e=[...h];"All"!==k&&(e=e.filter(e=>e.role===k)),"All"!==A&&(e=e.filter(e=>"Active"===A?!e.disabled:e.disabled)),S&&(e=e.filter(e=>e.email?.toLowerCase().includes(S.toLowerCase())||e.displayName?.toLowerCase().includes(S.toLowerCase())||e.uid?.toLowerCase().includes(S.toLowerCase()))),v(e)},[k,A,S,h]);let I=async(t,s)=>{if(confirm(`Are you sure you want to change this user's role to ${s}?`))try{let a=await e?.getIdToken();if(!(await fetch(`http://localhost:5000/api/admin/users/${t}/role`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({role:s})})).ok)throw Error("Failed to update role");alert("Role updated successfully"),E()}catch(e){console.error(e),alert("Error updating role")}},B=async(t,s)=>{let a=s?"activate":"deactivate";if(confirm(`Are you sure you want to ${a} this user?`))try{let l=await e?.getIdToken();if(!(await fetch(`http://localhost:5000/api/admin/users/${t}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({disabled:!s})})).ok)throw Error("Failed to update status");alert(`User ${a}d successfully`),E()}catch(e){console.error(e),alert("Error updating status")}};return(0,t.jsx)(l.default,{allowedRoles:["admin"],children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-slate-100 via-indigo-50 to-slate-100 p-8 shadow-2xl border border-slate-200",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:(0,t.jsx)(u.UserPlus,{className:"w-64 h-64 text-slate-900"})}),(0,t.jsxs)("div",{className:"relative z-10 flex justify-between items-end",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg border border-blue-500/20 backdrop-blur-sm",children:(0,t.jsx)(p.Users,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"User Management"})]}),(0,t.jsx)("p",{className:"text-slate-600 max-w-xl text-lg",children:"Manage all platform users, assign roles, and control access permissions."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(r.Button,{onClick:E,variant:"outline",className:"bg-white border-slate-200 hover:bg-slate-50 text-slate-700",children:[(0,t.jsx)(m.RefreshCw,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,t.jsxs)(r.Button,{className:"bg-indigo-600 hover:bg-indigo-700 text-white border-none shadow-lg shadow-indigo-500/20",children:[(0,t.jsx)(u.UserPlus,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]})]}),(0,t.jsxs)("div",{className:"aegis-card p-6 bg-white border border-slate-200 shadow-sm rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-500/10 rounded-lg border border-purple-500/20",children:(0,t.jsx)(c.Search,{className:"w-5 h-5 text-purple-600"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"Search & Filter"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(c.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5 transition-colors group-hover:text-primary"}),(0,t.jsx)(o.Input,{placeholder:"Search by name, email, or ID...",value:S,onChange:e=>T(e.target.value),className:"pl-12 bg-slate-50 border-slate-200 text-slate-900 placeholder:text-slate-500 focus:bg-white transition-all text-lg h-12 rounded-xl"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700 ml-1",children:"Role"}),(0,t.jsxs)(n.Select,{value:k,onValueChange:C,children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-slate-50 border-slate-200 text-slate-900 h-11 rounded-xl",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsxs)(n.SelectContent,{className:"bg-white border-slate-200 text-slate-900",children:[(0,t.jsx)(n.SelectItem,{value:"All",children:"All Roles"}),(0,t.jsx)(n.SelectItem,{value:"student",children:"Student"}),(0,t.jsx)(n.SelectItem,{value:"faculty",children:"Faculty"}),(0,t.jsx)(n.SelectItem,{value:"authority",children:"Authority"}),(0,t.jsx)(n.SelectItem,{value:"admin",children:"Admin"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700 ml-1",children:"Status"}),(0,t.jsxs)(n.Select,{value:A,onValueChange:R,children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-slate-50 border-slate-200 text-slate-900 h-11 rounded-xl",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsxs)(n.SelectContent,{className:"bg-white border-slate-200 text-slate-900",children:[(0,t.jsx)(n.SelectItem,{value:"All",children:"All Status"}),(0,t.jsx)(n.SelectItem,{value:"Active",children:"Active"}),(0,t.jsx)(n.SelectItem,{value:"Inactive",children:"Inactive"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Badge,{variant:"outline",className:"border-slate-200 bg-slate-50 text-slate-600 rounded-lg px-3 py-1",children:["Total: ",h.length]}),(0,t.jsxs)("p",{className:"text-sm text-slate-500",children:["Displaying ",j.length," users"]})]}),("All"!==k||"All"!==A||S)&&(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{C("All"),R("All"),T("")},className:"text-slate-500 hover:text-slate-900 hover:bg-slate-100",children:"Clear Filters"})]})]})]}),(0,t.jsx)("div",{className:"aegis-card p-0 overflow-hidden bg-white border border-slate-200 shadow-sm rounded-xl",children:N?(0,t.jsx)("div",{className:"p-8 space-y-4",children:[1,2,3,4,5].map(e=>(0,t.jsx)(d.Skeleton,{className:"h-16 w-full bg-white/5"},e))}):0===j.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:(0,t.jsx)(c.Search,{className:"w-8 h-8 text-slate-400"})}),(0,t.jsx)("h3",{className:"text-xl font-medium text-slate-900 mb-2",children:"No users found"}),(0,t.jsx)("p",{className:"text-slate-500 max-w-sm",children:"We couldn't find any users matching your current filters. Try adjusting your search query or clearing filters."})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(g.Table,{children:[(0,t.jsx)(g.TableHeader,{className:"bg-slate-50 border-b border-slate-200",children:(0,t.jsxs)(g.TableRow,{className:"border-none hover:bg-transparent",children:[(0,t.jsx)(g.TableHead,{className:"text-slate-700 font-semibold pl-6 h-12",children:"User"}),(0,t.jsx)(g.TableHead,{className:"text-slate-700 font-semibold h-12",children:"Email"}),(0,t.jsx)(g.TableHead,{className:"text-slate-700 font-semibold h-12",children:"Role"}),(0,t.jsx)(g.TableHead,{className:"text-slate-700 font-semibold h-12",children:"Status"}),(0,t.jsx)(g.TableHead,{className:"text-slate-700 font-semibold h-12",children:"Created"}),(0,t.jsx)(g.TableHead,{className:"text-slate-700 font-semibold text-right pr-6 h-12",children:"Actions"})]})}),(0,t.jsx)(g.TableBody,{children:j.map((e,s)=>(0,t.jsxs)(g.TableRow,{className:"border-b border-slate-200 hover:bg-slate-50 transition-colors group",children:[(0,t.jsx)(g.TableCell,{className:"font-medium text-slate-900 pl-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${"admin"===e.role?"bg-emerald-500/20 text-emerald-400":"faculty"===e.role?"bg-purple-500/20 text-purple-400":"authority"===e.role?"bg-orange-500/20 text-orange-400":"bg-blue-500/20 text-blue-400"}`,children:e.displayName?e.displayName.substring(0,2).toUpperCase():"U"}),e.displayName||"N/A"]})}),(0,t.jsx)(g.TableCell,{className:"text-slate-600 py-4",children:e.email}),(0,t.jsx)(g.TableCell,{className:"py-4",children:(0,t.jsx)(i.Badge,{variant:"outline",className:{student:"bg-blue-500/10 text-blue-400 border-blue-500/20",faculty:"bg-purple-500/10 text-purple-400 border-purple-500/20",authority:"bg-orange-500/10 text-orange-400 border-orange-500/20",admin:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20"}[e.role]||"bg-slate-500/10 text-slate-400 border-slate-500/20",children:e.role?e.role.charAt(0).toUpperCase()+e.role.slice(1):"Student"})}),(0,t.jsx)(g.TableCell,{className:"py-4",children:e.disabled?(0,t.jsxs)(i.Badge,{variant:"outline",className:"border-rose-200 bg-rose-50 text-rose-600 flex w-fit items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-500"}),"Inactive"]}):(0,t.jsxs)(i.Badge,{variant:"outline",className:"border-emerald-200 bg-emerald-50 text-emerald-600 flex w-fit items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Active"]})}),(0,t.jsx)(g.TableCell,{className:"text-sm text-slate-500 py-4",children:e.metadata?.creationTime?new Date(e.metadata.creationTime).toLocaleDateString():"N/A"}),(0,t.jsx)(g.TableCell,{className:"text-right pr-6 py-4",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsxs)(r.Button,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-slate-400 hover:text-slate-900 hover:bg-slate-100",onClick:()=>{let t=prompt("Enter new role (student, faculty, authority, admin):");t&&["student","faculty","authority","admin"].includes(t)&&I(e.uid,t)},children:[(0,t.jsx)(x,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Edit Role"})]}),(0,t.jsxs)(r.Button,{size:"sm",variant:"ghost",className:`h-8 w-8 p-0 ${e.disabled?"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50":"text-rose-600 hover:text-rose-700 hover:bg-rose-50"}`,onClick:()=>B(e.uid,e.disabled),children:[e.disabled?(0,t.jsx)(b.CheckCircle,{className:"w-4 h-4"}):(0,t.jsx)(f,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"sr-only",children:e.disabled?"Activate":"Deactivate"})]})]})})]},e.uid||s))})]})})})]})})}function j(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"text-white",children:"Loading..."}),children:(0,t.jsx)(y,{})})}e.s(["default",()=>j],48268)}]);