(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11870,e=>{"use strict";var s=e.i(43476),t=e.i(32341),a=e.i(18566),l=e.i(71645);e.s(["default",0,({children:e,allowedRoles:r})=>{let{user:i,loading:d,role:c}=(0,t.useAuth)(),o=(0,a.useRouter)();return((0,l.useEffect)(()=>{d||i?!d&&i&&r&&!r.includes(c||"student")&&o.push("/unauthorized"):o.push("/login")},[i,d,c,r,o]),d)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):i&&(!r||r.includes(c||"student"))?(0,s.jsx)(s.Fragment,{children:e}):null}])},61911,e=>{"use strict";let s=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>s],61911)},82458,e=>{"use strict";let s=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["default",()=>s])},89128,e=>{"use strict";var s=e.i(82458);e.s(["TriangleAlert",()=>s.default])},32212,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(32341),l=e.i(11870),r=e.i(87486),i=e.i(25652),d=e.i(61911),c=e.i(98919),o=e.i(63727),n=e.i(78583),x=e.i(89128);let m=({title:e,value:t,icon:a,color:l,bgColor:r})=>(0,s.jsxs)("div",{className:"aegis-card p-6 flex items-start justify-between group hover:border-slate-300 transition-all duration-300 bg-white border border-slate-200 shadow-sm rounded-xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-500 mb-1",children:e}),(0,s.jsx)("div",{className:"text-3xl font-bold text-slate-900 group-hover:text-primary transition-colors",children:t})]}),(0,s.jsx)("div",{className:`p-3 rounded-xl ${r} border border-slate-100`,children:(0,s.jsx)(a,{className:`w-6 h-6 ${l}`})})]});function h(){let{user:e}=(0,a.useAuth)(),[h,p]=(0,t.useState)({users:{total:0,byRole:{},registrationTrend:[]},grievances:{total:0,byCategory:{},byStatus:{},avgResolutionTime:0},opportunities:{total:0,applications:0,acceptanceRate:0},resources:{total:0,downloads:0,byCourse:{}}}),[b,u]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{(async()=>{if(e)try{let s=await e.getIdToken(),t=await fetch("http://localhost:5000/api/admin/analytics",{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw Error("Failed to fetch analytics");let a=await t.json();p(a)}catch(e){console.error(e),p(e=>({...e,users:{...e.users,total:120,byRole:{student:80,faculty:30,admin:10}},grievances:{...e.grievances,total:15,avgResolutionTime:2.5}}))}finally{u(!1)}})()},[e]),b)?(0,s.jsxs)("div",{className:"max-w-7xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,s.jsx)("div",{className:"h-48 w-full bg-white/5 rounded-3xl animate-pulse"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,s.jsx)("div",{className:"h-32 bg-white/5 rounded-2xl animate-pulse"},e))})]}):(0,s.jsx)(l.default,{allowedRoles:["admin"],children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-indigo-50 via-purple-50 to-slate-50 p-8 shadow-2xl border border-slate-200",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:(0,s.jsx)(i.TrendingUp,{className:"w-64 h-64 text-slate-900"})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-indigo-500/10 rounded-lg border border-indigo-200 backdrop-blur-sm",children:(0,s.jsx)(i.TrendingUp,{className:"w-6 h-6 text-indigo-600"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Platform Analytics"})]}),(0,s.jsx)("p",{className:"text-slate-600 max-w-xl text-lg",children:"Comprehensive insights into platform usage, grievances, opportunities, and resource engagement."})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[(0,s.jsx)(d.Users,{className:"w-5 h-5 text-blue-500"}),"User Overview"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(m,{title:"Total Users",value:h.users.total,icon:d.Users,color:"text-blue-600",bgColor:"bg-blue-50"}),Object.entries(h.users.byRole).map(([e,t])=>(0,s.jsx)(m,{title:`${e.charAt(0).toUpperCase()+e.slice(1)}s`,value:t,icon:d.Users,color:"text-purple-600",bgColor:"bg-purple-50"},e))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"aegis-card p-6 space-y-6 bg-white border border-slate-200 shadow-sm rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-rose-50 rounded-lg border border-rose-200",children:(0,s.jsx)(c.Shield,{className:"w-5 h-5 text-rose-600"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"Grievance Stats"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 rounded-xl bg-slate-50 border border-slate-100",children:[(0,s.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Total Grievances"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:h.grievances.total})]}),(0,s.jsxs)("div",{className:"p-4 rounded-xl bg-slate-50 border border-slate-100",children:[(0,s.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Avg Resolution"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:[h.grievances.avgResolutionTime," days"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-slate-700 mb-3 text-sm uppercase tracking-wider",children:"By Status"}),(0,s.jsx)("div",{className:"space-y-3",children:Object.entries(h.grievances.byStatus).map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-50 border border-slate-100 hover:bg-slate-100 transition-colors",children:[(0,s.jsx)("span",{className:"font-medium text-slate-900",children:e}),(0,s.jsx)(r.Badge,{variant:"secondary",className:"bg-white text-slate-600 border-slate-200 shadow-sm",children:t})]},e))})]})]}),(0,s.jsxs)("div",{className:"aegis-card p-6 space-y-6 bg-white border border-slate-200 shadow-sm rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-orange-50 rounded-lg border border-orange-200",children:(0,s.jsx)(x.TriangleAlert,{className:"w-5 h-5 text-orange-600"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"Grievance Categories"})]}),(0,s.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:Object.entries(h.grievances.byCategory).map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-50 border border-slate-100 hover:bg-slate-100 transition-colors",children:[(0,s.jsx)("span",{className:"font-medium text-slate-900",children:e}),(0,s.jsx)(r.Badge,{variant:"secondary",className:"bg-white text-slate-600 border-slate-200 shadow-sm",children:t})]},e))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"aegis-card p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg border border-blue-500/20",children:(0,s.jsx)(o.Briefcase,{className:"w-5 h-5 text-blue-400"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"Opportunities"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/5 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Total"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:h.opportunities.total})]}),(0,s.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/5 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Apps"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:h.opportunities.applications})]}),(0,s.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/5 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Accept Rate"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-emerald-400",children:[h.opportunities.acceptanceRate,"%"]})]})]})]}),(0,s.jsxs)("div",{className:"aegis-card p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-emerald-500/10 rounded-lg border border-emerald-500/20",children:(0,s.jsx)(n.FileText,{className:"w-5 h-5 text-emerald-400"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"Resources"})]}),(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 p-4 rounded-xl bg-white/5 border border-white/5",children:[(0,s.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Total Files"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:h.resources.total})]}),(0,s.jsxs)("div",{className:"flex-1 p-4 rounded-xl bg-white/5 border border-white/5",children:[(0,s.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Total Downloads"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:h.resources.downloads})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-slate-300 mb-3 text-sm uppercase tracking-wider",children:"Top Courses"}),(0,s.jsx)("div",{className:"space-y-2 max-h-[150px] overflow-y-auto pr-2 custom-scrollbar",children:Object.entries(h.resources.byCourse).map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-white/5 transition-colors",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300 truncate max-w-[200px]",children:e}),(0,s.jsxs)("span",{className:"text-xs font-mono text-slate-500",children:[t," files"]})]},e))})]})]})]})]})})}e.s(["default",()=>h])}]);