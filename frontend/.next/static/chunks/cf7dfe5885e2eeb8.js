(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11870,e=>{"use strict";var s=e.i(43476),t=e.i(32341),a=e.i(18566),r=e.i(71645);e.s(["default",0,({children:e,allowedRoles:d})=>{let{user:i,loading:n,role:l}=(0,t.useAuth)(),c=(0,a.useRouter)();return((0,r.useEffect)(()=>{n||i?!n&&i&&d&&!d.includes(l||"student")&&c.push("/unauthorized"):c.push("/login")},[i,n,l,d,c]),n)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):i&&(!d||d.includes(l||"student"))?(0,s.jsx)(s.Fragment,{children:e}):null}])},2747,e=>{"use strict";var s=e.i(43476),t=e.i(75157);function a({className:e,...a}){return(0,s.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",e),...a})}e.s(["Skeleton",()=>a])},15288,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(75157);let r=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));r.displayName="Card";let d=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let i=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let n=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));n.displayName="CardDescription";let l=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...t}));l.displayName="CardContent";let c=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t}));c.displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>c,"CardHeader",()=>d,"CardTitle",()=>i])},3105,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(32341),r=e.i(11870),d=e.i(15288),i=e.i(87486),n=e.i(2747);function l(){let{user:e}=(0,a.useAuth)(),[l,c]=(0,t.useState)([]),[o,u]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(async()=>{if(e)try{let s=await e.getIdToken(),t=await fetch("http://localhost:5000/api/grievances/list?status=Resolved",{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw Error("Failed to fetch history");let a=await t.json();c(a)}catch(e){console.error(e)}finally{u(!1)}})()},[e]),(0,s.jsx)(r.default,{allowedRoles:["authority","admin"],children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Resolved History"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Archive of resolved grievances and actions taken."})]}),o?(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,s.jsx)(n.Skeleton,{className:"h-24 w-full"},e))}):0===l.length?(0,s.jsx)(d.Card,{className:"text-center p-12 text-muted-foreground",children:"No resolved grievances found."}):(0,s.jsx)("div",{className:"grid gap-4",children:l.map(e=>(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(d.CardTitle,{className:"text-base font-semibold",children:["#",e.grievanceId.slice(0,8)," - ",e.category," Issue"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(1e3*e.createdAt._seconds).toLocaleDateString()})]}),(0,s.jsx)(i.Badge,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-900 border-green-200",children:"Resolved"})]})}),(0,s.jsxs)(d.CardContent,{children:[(0,s.jsx)("p",{className:"text-sm",children:e.description}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t text-sm bg-muted/40 p-2 rounded",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Resolution: "}),e.timeline?.find(e=>"Resolved"===e.status)?.remark||"No remarks provided."]})]})]},e.grievanceId))})]})})}e.s(["default",()=>l])}]);