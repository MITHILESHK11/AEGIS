(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},61653,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["default",()=>t])},11870,e=>{"use strict";var t=e.i(43476),s=e.i(32341),a=e.i(18566),l=e.i(71645);e.s(["default",0,({children:e,allowedRoles:r})=>{let{user:i,loading:d,role:c}=(0,s.useAuth)(),n=(0,a.useRouter)();return((0,l.useEffect)(()=>{d||i?!d&&i&&r&&!r.includes(c||"student")&&n.push("/unauthorized"):n.push("/login")},[i,d,c,r,n]),d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):i&&(!r||r.includes(c||"student"))?(0,t.jsx)(t.Fragment,{children:e}):null}])},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},21218,e=>{"use strict";let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218)},7621,e=>{"use strict";var t=e.i(61653);e.s(["CircleAlert",()=>t.default])},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},69864,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(32341),r=e.i(11870),i=e.i(19455),d=e.i(7621),c=e.i(69638),n=e.i(21218),o=e.i(3116),x=e.i(75254);let m=(0,x.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var h=e.i(87316),u=e.i(46897),p=e.i(78583);let g=(0,x.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),b=(0,x.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function f({params:e}){let{user:x}=(0,l.useAuth)(),f=(0,a.useRouter)(),[v,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(!0),[w,k]=(0,s.useState)("");return((0,s.useEffect)(()=>{(async()=>{if(!x)return;let t=(await e).id;try{let e=await x.getIdToken(),s=await fetch("http://localhost:5000/api/grievances/list",{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw Error("Failed to fetch grievance");let a=(await s.json()).find(e=>e.grievanceId===t);a?y(a):k("Grievance not found or access denied.")}catch(e){console.error(e),k(e.message)}finally{N(!1)}})()},[x,e]),j)?(0,t.jsxs)("div",{className:"max-w-5xl mx-auto py-10 px-4 space-y-8",children:[(0,t.jsx)("div",{className:"h-8 w-24 bg-slate-200 rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-64 bg-slate-100 rounded-3xl animate-pulse"})]}):w?(0,t.jsx)("div",{className:"max-w-5xl mx-auto py-10 px-4 text-center",children:(0,t.jsxs)("div",{className:"aegis-card p-10 border-red-500/20 bg-red-500/5 rounded-xl",children:[(0,t.jsx)(d.CircleAlert,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Error Loading Grievance"}),(0,t.jsx)("p",{className:"text-red-500",children:w}),(0,t.jsx)(i.Button,{onClick:()=>f.back(),variant:"ghost",className:"mt-6 text-slate-500 hover:text-slate-900",children:"Go Back"})]})}):v?(0,t.jsx)(r.default,{allowedRoles:["student","authority","admin"],children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto py-10 px-4 space-y-6 animate-in fade-in-50",children:[(0,t.jsxs)("button",{onClick:()=>f.back(),className:"flex items-center text-slate-500 hover:text-slate-900 transition-colors group",children:[(0,t.jsx)(m,{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform"}),"Back to Grievances"]}),(0,t.jsxs)("div",{className:"aegis-card overflow-hidden relative bg-white border border-slate-200 shadow-sm rounded-xl",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600"}),(0,t.jsxs)("div",{className:"p-8 md:p-10 space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 border-b border-slate-100 pb-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,t.jsxs)("div",{className:`px-4 py-1.5 rounded-full text-sm font-semibold border flex items-center ${(e=>{switch(e){case"Resolved":return"bg-emerald-500/10 text-emerald-600 border-emerald-500/20";case"In Progress":return"bg-blue-500/10 text-blue-600 border-blue-500/20";case"Review":return"bg-yellow-500/10 text-yellow-600 border-yellow-500/20";default:return"bg-slate-500/10 text-slate-600 border-slate-500/20"}})(v.status)}`,children:[v.status.toUpperCase(),(e=>{switch(e){case"Resolved":return(0,t.jsx)(c.CheckCircle,{className:"w-4 h-4 ml-2"});case"In Progress":return(0,t.jsx)(n.Activity,{className:"w-4 h-4 ml-2 animate-pulse"});case"Review":return(0,t.jsx)(d.CircleAlert,{className:"w-4 h-4 ml-2"});default:return(0,t.jsx)(o.Clock,{className:"w-4 h-4 ml-2"})}})(v.status)]}),(0,t.jsxs)("span",{className:"text-slate-500 text-sm flex items-center gap-2",children:[(0,t.jsx)(h.Calendar,{className:"w-4 h-4"}),v.createdAt?._seconds?new Date(1e3*v.createdAt._seconds).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"N/A"]}),(0,t.jsxs)("span",{className:"text-slate-500 text-sm flex items-center gap-2 font-mono bg-slate-50 px-2 py-0.5 rounded border border-slate-200",children:["#",v.grievanceId.slice(0,8)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:[v.category," Issue"]}),(0,t.jsxs)("div",{className:"flex items-center text-slate-500 text-lg",children:[(0,t.jsx)(u.MapPin,{className:"w-5 h-5 mr-2 text-indigo-500"}),v.location]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,t.jsxs)("span",{className:`px-4 py-1.5 rounded-lg text-sm font-medium border ${"Urgent"===v.priority?"bg-red-500/10 text-red-600 border-red-500/20 animate-pulse":"High"===v.priority?"bg-rose-500/10 text-rose-600 border-rose-500/20":"Medium"===v.priority?"bg-orange-500/10 text-orange-600 border-orange-500/20":"bg-emerald-500/10 text-emerald-600 border-emerald-500/20"}`,children:[v.priority," Priority"]}),v.isAnonymous&&(0,t.jsx)("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded border border-slate-200",children:"Submitted Anonymously"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest mb-4 flex items-center",children:[(0,t.jsx)(p.FileText,{className:"w-4 h-4 mr-2"}),"Description"]}),(0,t.jsx)("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-200 leading-relaxed text-slate-700 text-lg",children:v.description})]}),v.photoUrl&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest mb-4 flex items-center",children:[(0,t.jsx)(g,{className:"w-4 h-4 mr-2"}),"Evidence"]}),(0,t.jsx)("div",{className:"relative group rounded-2xl overflow-hidden border border-slate-200 max-w-md bg-slate-50",children:(0,t.jsx)("img",{src:v.photoUrl,alt:"Grievance Evidence",className:"w-full h-auto object-cover transition-transform duration-500 group-hover:scale-105"})})]})]}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-200 h-full",children:[(0,t.jsxs)("h3",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest mb-6 flex items-center",children:[(0,t.jsx)(b,{className:"w-4 h-4 mr-2"}),"Timeline"]}),(0,t.jsxs)("div",{className:"space-y-0 relative",children:[(0,t.jsx)("div",{className:"absolute left-3.5 top-2 bottom-4 w-0.5 bg-slate-200"}),v.timeline&&v.timeline.length>0?v.timeline.map((e,s)=>(0,t.jsxs)("div",{className:"relative pl-10 pb-8 last:pb-0 group",children:[(0,t.jsx)("div",{className:`absolute left-0 top-1.5 w-7 h-7 rounded-full border-4 border-white z-10 flex items-center justify-center transition-colors shadow-sm ${0===s?"bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]":"bg-slate-300 group-hover:bg-slate-400"}`,children:0===s&&(0,t.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-slate-900 font-medium text-base mb-0.5",children:e.status}),(0,t.jsx)("span",{className:"text-xs text-slate-500 mb-2",children:e.timestamp?new Date(e.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Date not available"}),e.remark&&(0,t.jsxs)("div",{className:"text-sm text-slate-600 bg-white p-3 rounded-lg border border-slate-200 italic shadow-sm",children:['"',e.remark,'"']})]})]},s)):(0,t.jsx)("div",{className:"text-slate-500 text-sm italic pl-4",children:"No timeline events recorded properly."}),(!v.timeline||0===v.timeline.length)&&(0,t.jsxs)("div",{className:"relative pl-10 pb-0",children:[(0,t.jsx)("div",{className:"absolute left-0 top-1.5 w-7 h-7 rounded-full bg-slate-300 border-4 border-white z-10"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-slate-900 font-medium",children:"Ticket Created"}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:v.createdAt?._seconds?new Date(1e3*v.createdAt._seconds).toLocaleString():"N/A"})]})]})]})]})})]})]})]})]})}):null}e.s(["default",()=>f],69864)}]);