(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11870,e=>{"use strict";var t=e.i(43476),s=e.i(32341),a=e.i(18566),r=e.i(71645);e.s(["default",0,({children:e,allowedRoles:i})=>{let{user:l,loading:d,role:n}=(0,s.useAuth)(),o=(0,a.useRouter)();return((0,r.useEffect)(()=>{d||l?!d&&l&&i&&!i.includes(n||"student")&&o.push("/unauthorized"):o.push("/login")},[l,d,n,i,o]),d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading authentication..."}):l&&(!i||i.includes(n||"student"))?(0,t.jsx)(t.Fragment,{children:e}):null}])},2747,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",e),...a})}e.s(["Skeleton",()=>a])},15288,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));r.displayName="Card";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let d=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));n.displayName="CardContent";let o=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s}));o.displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>d,"CardFooter",()=>o,"CardHeader",()=>i,"CardTitle",()=>l])},6876,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(32341),r=e.i(11870),i=e.i(15288),l=e.i(87486),d=e.i(19455),n=e.i(2747),o=e.i(78583),c=e.i(84614);function u(){let{user:e}=(0,a.useAuth)(),[u,p]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{if(e)try{let t=await e.getIdToken(),s=await fetch("http://localhost:5000/api/opportunities/applications",{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw Error("Failed to fetch applications");let a=await s.json();p(a)}catch(e){console.error(e)}finally{h(!1)}})()},[e]);let x=async(t,s)=>{if(confirm(`Are you sure you want to mark this application as ${s}?`))try{let a=await e?.getIdToken();if(!(await fetch(`http://localhost:5000/api/opportunities/application/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({status:s})})).ok)throw Error("Failed to update status");p(e=>e.map(e=>e.applicationId===t?{...e,status:s}:e))}catch(e){console.error(e),alert("Error updating status")}};return(0,t.jsx)(r.default,{allowedRoles:["faculty","admin"],children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto py-10 space-y-8 animate-in fade-in-50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Applications Review"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Review student applications for your posted opportunities."})]}),m?(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsx)(n.Skeleton,{className:"h-32 w-full"},e))}):0===u.length?(0,t.jsx)(i.Card,{className:"text-center p-12 border-dashed",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-muted-foreground",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-muted rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(c.User,{className:"w-6 h-6"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"No applications yet"}),(0,t.jsx)("p",{children:"When students apply to your opportunities, they will appear here."})]})}):(0,t.jsx)("div",{className:"grid gap-4",children:u.map(e=>(0,t.jsxs)(i.Card,{className:"hover:border-primary/50 transition-colors",children:[(0,t.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.CardTitle,{className:"text-lg font-bold",children:e.opportunityTitle||"Unknown Opportunity"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Applicant ID: ",e.studentId]})]}),(0,t.jsx)(l.Badge,{variant:"Submitted"===e.status?"default":"Shortlisted"===e.status?"secondary":"outline",children:e.status})]}),(0,t.jsxs)(i.CardContent,{children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-muted/30 p-4 rounded-md",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Cover Letter"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap line-clamp-4",children:e.coverLetter||"No cover letter provided."})]}),(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center bg-muted/30 p-4 rounded-md gap-4",children:[(0,t.jsx)(o.FileText,{className:"w-8 h-8 text-primary"}),(0,t.jsx)(d.Button,{variant:"outline",asChild:!0,children:(0,t.jsx)("a",{href:e.resumeUrl,target:"_blank",rel:"noopener noreferrer",children:"View Resume"})})]})]}),"Submitted"===e.status&&(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[(0,t.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>x(e.applicationId,"Rejected"),className:"text-destructive hover:bg-destructive/10 border-destructive/20",children:"Reject"}),(0,t.jsx)(d.Button,{size:"sm",onClick:()=>x(e.applicationId,"Shortlisted"),children:"Shortlist"})]}),"Shortlisted"===e.status&&(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[(0,t.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>x(e.applicationId,"Rejected"),className:"text-destructive",children:"Reject"}),(0,t.jsx)(d.Button,{size:"sm",onClick:()=>x(e.applicationId,"Accepted"),className:"bg-green-600 hover:bg-green-700",children:"Accept"})]})]})]},e.applicationId))})]})})}e.s(["default",()=>u])}]);